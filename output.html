<!DOCTYPE html>
<script>const __RELEASE = false;
let global = {};
let __internal_global = {};

let ID_COUNTER = 0;

const assert = (condition, message) => {
    if (__RELEASE === true) return;

    if (!condition) {
    	throw new Error(message);
    }
}

const subscribe_fn = (subList) => (callback) => {
    const id = ID_COUNTER++;
    subList.set(id, callback);
    return () => subList.delete(id);
}

const state = (initialState) => {
    const state = {
	__STATE: true,
	value: initialState,
	subscriptions: new Map(),
    };

    state.subscribe = subscribe_fn(state.subscriptions); 

    state.set = (setter) => {
	state.value = setter(state.value);
	state.subscriptions.forEach((sub) => sub(state.value));
    };

    return state; 
}

const lstate = (initialState) => {
    assert(Array.isArray(initialState), "Initial value of lstate must be an array");

    const lstate = {
	__LSTATE: true,
	value: initialState,
	subscriptions: new Map(),
	addSubscriptions: new Map(),
	removeSubscriptions: new Map(),
    };

    lstate.subscribe = subscribe_fn(lstate.subscriptions);
    lstate.subscribeAdd = subscribe_fn(lstate.addSubscriptions);
    lstate.subscribeRemove = subscribe_fn(lstate.removeSubscriptions);

    lstate.push = (item) => {
	lstate.value.push(item);
	const position = lstate.value.length - 1;
	lstate.subscriptions.forEach((sub) => sub(lstate.value));
	lstate.addSubscriptions.forEach((sub) => sub(item, position));
    };

    lstate.pop = () => {
	const _ = lstate.value.pop();
	const position = lstate.value.length;
	lstate.subscriptions.forEach((sub) => sub(lstate.value));
	lstate.removeSubscriptions.forEach((sub) => sub(position));
    };

    lstate.removeAt = (position) => {
	const _ = lstate.value.splice(position, 1);
	lstate.subscriptions.forEach((sub) => sub(lstate.value));
	lstate.removeSubscriptions.forEach((sub) => sub(position));
    };

    lstate.insertAt = (position, item) => {
	lstate.value.splice(position, 0, item);
	lstate.subscriptions.forEach((sub) => sub(lstate.value));
	lstate.addSubscriptions.forEach((sub) => sub(item, position));
    };

    lstate.findAndRemove = (predicate) => {
	const position = lstate.value.findIndex(predicate);
	if (position === -1) return;
	const _ = lstate.value.splice(position, 1);
	lstate.subscriptions.forEach((sub) => sub(lstate.value));
	lstate.removeSubscriptions.forEach((sub) => sub(position));
    };

    return lstate;
}
</script>
<script>
    let __Root_1_text = state("");

    const __Root_1_list = lstate([[123, "hi"], [123123, "h"]]);

    let __Root_1_key = 0;

    const __Root_1_add = () => {
	if (__Root_1_text.value.length == 0) return;

	__Root_1_list.push([__Root_1_key++, __Root_1_text.value]);
	__Root_1_text.set(() => "");
    }

    const __Root_1_remove = (__Root_1_key) => {
	__Root_1_list.findAndRemove(([k, _]) => k === __Root_1_key);
    }

</script>

<marquee class="blue-text">
    TODOOOOOOOO LIIIIISSSTTTTTT	
</marquee>

<div>
    <span id="r2"></span>
<script>

    let __r2textNode = document.createTextNode(``);
    const __r2setTextNode = (text) => __r2textNode.nodeValue = text;
    
        (__Root_1_list).subscribe(() => (__r2setTextNode)(((__Root_1_list).value).length));
        (__r2setTextNode)(((__Root_1_list).value).length); 
        
    
document.getElementById("r2").appendChild(__r2textNode);
</script>item<span id="r3"></span>
<script>

    let __r3textNode = document.createTextNode(``);
    const __r3setTextNode = (text) => __r3textNode.nodeValue = text;
    
        (__Root_1_list).subscribe(() => (__r3setTextNode)(((__Root_1_list).value).length !== 1 ? "s" : ""));
        (__r3setTextNode)(((__Root_1_list).value).length !== 1 ? "s" : ""); 
        
    
document.getElementById("r3").appendChild(__r3textNode);
</script>in list.
</div>

<span id="r5"></span>
                <script>
                    const __elem_reactive_html_4 = document.getElementById("r5");
                    const __elem6 = document.createElement("input");
__elem6.setAttribute("id", "input");
__elem6.setAttribute("type", "text");
{
                const value = __Root_1_text;
                if (value.__STATE === true) {
                    const update_fn = () => (__elem6).value = value.value;
                    value.subscribe(update_fn);
                    update_fn();
                    __elem6.oninput = (e) => {
                        value.set(() => e.target.value);
                    };
                }
            }__elem_reactive_html_4.appendChild(__elem6);

                </script>
<span id="r8"></span>
                <script>
                    const __elem_reactive_html_7 = document.getElementById("r8");
                    const __elem9 = document.createElement("button");
__elem9.onclick = (__Root_1_add);const __textNode10 = document.createTextNode(`Click Me!`);
__elem9.appendChild(__textNode10);
__elem_reactive_html_7.appendChild(__elem9);

                </script>

<ul>
<span id="r11"></span>
                <script>
                    const __elem12 = document.getElementById("r11");
                    
                    const r11loop = (arr) => {
        __elem12.innerHTML = "";
        for (let __i = 0; __i < arr.length; __i++) {
            const i = arr[__i];
            const __elem13 = document.createElement("span");
const __textNode14 = document.createTextNode(`
    `);
__elem13.appendChild(__textNode14);
{

                    const props = {};
props.name = i[1];
props.delete = () => __Root_1_remove(i[0]) ;
                    
    const b = state(false);
;
const __textNode16 = document.createTextNode(`

`);
__elem13.appendChild(__textNode16);
const __elem17 = document.createElement("li");
const __textNode18 = document.createTextNode(`
    `);
__elem17.appendChild(__textNode18);
const __elem19 = document.createElement("input");
__elem19.setAttribute("type", "checkbox");
{
                const value = b;
                if (value.__STATE === true) {
                    const update_fn = () => (__elem19).checked = value.value;
                    value.subscribe(update_fn);
                    update_fn();
                    __elem19.onchange = (e) => {
                        console.log(e.target.checked);
                        value.set(() => e.target.checked);
                    };
                }
            }__elem17.appendChild(__elem19);
const __textNode20 = document.createTextNode(` 
    `);
__elem17.appendChild(__textNode20);
const __elem21 = document.createElement("span");
const __22update_attr = (val) => __elem21.setAttribute("style", val);

        (b).subscribe(() => (__22update_attr)(((b).value) ? "text-decoration: line-through;" : ""));
        (__22update_attr)(((b).value) ? "text-decoration: line-through;" : ""); 
        
const __textNode23 = document.createTextNode(`
	`);
__elem21.appendChild(__textNode23);

    let __r24textNode = document.createTextNode(``);
    const __r24setTextNode = (text) => __r24textNode.nodeValue = text;
    
        
        (__r24setTextNode)(props.name); 
        
    
__elem21.appendChild(__r24textNode);const __textNode25 = document.createTextNode(`	`);
__elem21.appendChild(__textNode25);
const __elem26 = document.createElement("button");
__elem26.onclick = (props.delete);const __textNode27 = document.createTextNode(`delete`);
__elem26.appendChild(__textNode27);
__elem21.appendChild(__elem26);
const __textNode28 = document.createTextNode(`
    `);
__elem21.appendChild(__textNode28);
__elem17.appendChild(__elem21);
const __textNode29 = document.createTextNode(`
`);
__elem17.appendChild(__textNode29);
__elem13.appendChild(__elem17);
const __textNode30 = document.createTextNode(`
`);
__elem13.appendChild(__textNode30);
}
const __textNode31 = document.createTextNode(`
`);
__elem13.appendChild(__textNode31);
__elem12.appendChild(__elem13);

        }
    };
                    
            const add = (value, position) => {
                const i = value;
                let wrapper_span = undefined;
                {
                    const __elem12 = document.createElement("span");
                    const __elem13 = document.createElement("span");
const __textNode14 = document.createTextNode(`
    `);
__elem13.appendChild(__textNode14);
{

                    const props = {};
props.name = i[1];
props.delete = () => __Root_1_remove(i[0]) ;
                    
    const b = state(false);
;
const __textNode16 = document.createTextNode(`

`);
__elem13.appendChild(__textNode16);
const __elem17 = document.createElement("li");
const __textNode18 = document.createTextNode(`
    `);
__elem17.appendChild(__textNode18);
const __elem19 = document.createElement("input");
__elem19.setAttribute("type", "checkbox");
{
                const value = b;
                if (value.__STATE === true) {
                    const update_fn = () => (__elem19).checked = value.value;
                    value.subscribe(update_fn);
                    update_fn();
                    __elem19.onchange = (e) => {
                        console.log(e.target.checked);
                        value.set(() => e.target.checked);
                    };
                }
            }__elem17.appendChild(__elem19);
const __textNode20 = document.createTextNode(` 
    `);
__elem17.appendChild(__textNode20);
const __elem21 = document.createElement("span");
const __22update_attr = (val) => __elem21.setAttribute("style", val);

        (b).subscribe(() => (__22update_attr)(((b).value) ? "text-decoration: line-through;" : ""));
        (__22update_attr)(((b).value) ? "text-decoration: line-through;" : ""); 
        
const __textNode23 = document.createTextNode(`
	`);
__elem21.appendChild(__textNode23);

    let __r24textNode = document.createTextNode(``);
    const __r24setTextNode = (text) => __r24textNode.nodeValue = text;
    
        
        (__r24setTextNode)(props.name); 
        
    
__elem21.appendChild(__r24textNode);const __textNode25 = document.createTextNode(`	`);
__elem21.appendChild(__textNode25);
const __elem26 = document.createElement("button");
__elem26.onclick = (props.delete);const __textNode27 = document.createTextNode(`delete`);
__elem26.appendChild(__textNode27);
__elem21.appendChild(__elem26);
const __textNode28 = document.createTextNode(`
    `);
__elem21.appendChild(__textNode28);
__elem17.appendChild(__elem21);
const __textNode29 = document.createTextNode(`
`);
__elem17.appendChild(__textNode29);
__elem13.appendChild(__elem17);
const __textNode30 = document.createTextNode(`
`);
__elem13.appendChild(__textNode30);
}
const __textNode31 = document.createTextNode(`
`);
__elem13.appendChild(__textNode31);
__elem12.appendChild(__elem13);

                    wrapper_span = __elem12;
                }
                if (__elem12.childNodes.length === 0) {
                    __elem12.appendChild(wrapper_span);
                } else {
                    __elem12.insertBefore(wrapper_span, __elem12.childNodes[position]);
                }
            };

            const remove = (position) => {
                __elem12.removeChild(__elem12.childNodes[position]);
            };

            __Root_1_list.subscribeAdd(add);
            __Root_1_list.subscribeRemove(remove);

            r11loop(__Root_1_list.value);
         
                </script></ul>

<style>
    div {
	color: red;
    }

    .blue-text {
	color: blue;
    }

    html {
	background-color: black;
	color: white;
    }
</style>

